<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>商品頁</title>
    <link rel="stylesheet" href="css/merch.css">
</head>

<body>
    <div id="app">
        <!-- 透過網址傳入index取值 -->
        <header class="sticky-nav-bar">
            <div class="logo">LOGO</div>
            <div class="functions">
                <i class="fa-regular fa-circle-user" @click="checkUserData()"></i>
                <label for="collectionToggler"><i class="fa-regular fa-heart"></i></label>
                <i class="fa-solid fa-cart-shopping" @click="shoppingCart()"></i>
                <i class="fa-solid fa-receipt" @click="checkOrder()"></i>
                <i class="fa-solid fa-right-to-bracket" @click="logOut()"></i>
                <input id="collectionToggler" type="checkbox" style="display:none;">
                <div class="collection">
                    <table>
                        <tr>
                            <td></td>
                            <td>品名</td>
                            <td>價格</td>
                        </tr>
                        <tr class="merchTr" v-for="(item,index) in collection">
                            <td> <img :src="item.merchPicSrc" alt="merchPic"> </td>
                            <td> {{item.merchName}} </td>
                            <td> {{item.merchPrice}} </td>
                            <td @click='goToMerch(item.id)'> <i class="fa-solid fa-arrow-up-right-from-square"></i>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </header>
        <main style="margin-bottom:5vh;">
            <div class="introduction">
                <img :src="merchData.merchPicSrc" alt="">
                <div class="description">
                    <h1 style="margin:0;font-size:8vh;"> {{merchData.merchName}} </h1>
                    <h2> {{merchData.description}} </h2>
                    <h2> 價格: {{merchData.merchPrice}} </h2>
                    <h2> 數量: {{merchData.quantity}} </h2>
                    <i @click="changeLike()" class="fa-solid fa-heart" id="likeBtn" v-if="likeOrNot == 't'"></i>
                    <i @click="changeLike()" class="fa-regular fa-heart" id="likeBtn" v-else></i>
                    <div class="calculator">
                        <button @click="minus()"><i class="fa-solid fa-minus"></i></button>
                        <input type="text" v-model="quantity">
                        <button @click="plus()"><i class="fa-solid fa-plus"></i></button>
                        <button @click="addToCart()"
                            style="width:6vw;height:4vh;border-radius: 15px;background-color:rgb(244, 202, 65);color:rgb(0, 0, 0);font-weight: bold;">加入購物車</button>
                    </div>

                </div>
            </div>
            <div class="commentsBoard">
                <div class="newComments">
                    <textarea cols="30" rows="10" placeholder="留下您的評論" v-model="newComments"></textarea>
                    <button class="submit" @click="submit_comments()">送出</button>
                </div>
                <div>
                    <div class="title">
                        <h1>留言區</h1>
                    </div>
                    <table>
                        <tr v-for="item in merchData.comments">
                            <td> 使用者{{item.user}}: </td>
                            <td> {{item.text}} </td>
                        </tr>
                    </table>
                </div>
            </div>
        </main>
        <div style="position: fixed;left:1%;bottom: 1%;font-size:5vh;" @click="backToHomepage()">
            <i class="fa-solid fa-house"></i>
        </div>
    </div>

    </div>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@9"></script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/axios/1.3.3/axios.js'
        integrity='sha512-uap0bTaa/bPjLtLVuiWS+qak4SJrOPcdfVzUdrrE7LgvtMlkV6DeiBH7Rgt7B+74M3crOr3QdTX3gCTMMRVzZA=='
        crossorigin='anonymous'></script>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.7.14/dist/vue.js"></script>
    <script src="/dist/merch.js" defer></script>
    <script src="https://kit.fontawesome.com/cce369cee1.js" crossorigin="anonymous"></script>
</body>

</html>